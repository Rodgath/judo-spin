/**
 * Judo Spin
 * @name        judo-spin
 * @description 360Â° degrees image spinner using JavaScript.
 * @link        https://github.com/Rodgath/judo-spin
 * @author      Rodgath, https://Rodgath.com
 * @version     v1.0.0
 * @created     July 22, 2023
 * @updated     August 04, 2023
 * @copyright   Copyright (C) 2023-2023, Rodgath
 * @license     MIT
 * @licenseMIT  https://github.com/Rodgath/judo-spin/blob/main/LICENSE
 * @demoExample https://rodgath.github.io/judo-spin/demo/
 */
"use strict";function judoSpin(e,t){t||(r=e.dataset.judoSpin)&&(t=JSON.parse(r));var n,o,r,u=function(e){e=parseInt(e,10);return isNaN(e)?1:Math.abs(e)}((t=Object.assign({},{currImg:1,images:[]},t)).currImage)-1,i=e instanceof HTMLElement||e instanceof Node?e:document.querySelector(e),s=function(){var e;e=(t.hasOwnProperty("images")&&Array.isArray(t.images)&&0<t.images.length&&t.images.forEach(function(e){var t=document.createElement("img");t.src=e.src,t.alt=e.title,i.appendChild(t)}),i.querySelectorAll("img"));return e}().length,a=360/s,c=0<u?u*a:0,d=!1,l=document.createElement("div");(o=l).className="judo-spin-overlay",o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.top="0",o.style.left="0",o.style.zIndex="1",i.appendChild(o),o.addEventListener("mouseover",function(){return o.style.cursor="e-resize"}),o.addEventListener("mouseout",function(){return o.style.cursor="auto"}),(r=i).classList.add("judo-spin-container"),r.style.position="relative",r.style.width="100%",r.style.height="auto",r.style.overflow="hidden";for(var m=i.getElementsByTagName("img"),v=0;v<m.length;v++)m[v].style.width="100%";e=i,(n=document.createElement("div")).classList.add("judo-spin-wrapper"),n.style.width="fit-content",n.style.margin="0 auto",e.parentNode.insertBefore(n,e),n.appendChild(e);l.addEventListener("mousedown",function(e){return y(e)}),l.addEventListener("touchstart",function(e){return y(e)});var h,f,p,y=function(e){e.preventDefault();var t="touchstart"===e.type?"touchmove":"mousemove",n="touchstart"===e.type?E:g,e=(console.log(e.type),d=!0,j(c));c=e*a,l.addEventListener(t,n)},g=(document.addEventListener("mouseup",function(){d=!1,l.removeEventListener("mousemove",g)}),document.addEventListener("touchend",function(){d=!1,l.removeEventListener("touchmove",E)}),function(e){return L(e)}),E=function(e){return L(e)},L=function(e){d&&("right"===(e=function(e,t){var n;{var o;null!==w&&null!==M&&(N<(o=e-w)?n="right":o<-N&&(n="left"))}return w=e,M=t,n}(("touchmove"===e.type?e.touches[0]:e).clientX,("touchmove"===e.type?e.touches[0]:e).clientY))?u++:"left"===e&&u--,S(c=((c=u*a)%360+360)%360))},j=function(e){e=Math.floor(e/a);return e<0?e=s-1:s<=e&&(e=0),e},S=function(e){for(var t=Math.floor(e/a)+1,n=1;n<=s;n++)i.querySelector("img:nth-child("+n+")").style.display=n===t?"block":"none"},w=(S(c),null),M=null,N=1;function I(e){e.preventDefault(),p=!0,document.addEventListener("mousemove",b),document.addEventListener("touchmove",b)}function b(e){var t,n,o;p&&(t=h.getBoundingClientRect(),n=f.offsetWidth,o=h.offsetWidth-n,e="touchmove"===e.type?e.touches[0].clientX-t.left-n/2:e.clientX-t.left-n/2,e=Math.max(0,Math.min(o,e)),f.style.left="".concat(e,"px"),c=Math.floor(e*(360/o)),S(c=(c%360+360)%360))}function B(){p=!1,document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",b)}h=document.getElementById("judo-scroller"),f=document.getElementById("judo-draggable"),p=!1,f.addEventListener("mousedown",I),f.addEventListener("touchstart",I),document.addEventListener("mouseup",B),document.addEventListener("touchend",B)}var judoSpinElements=document.querySelectorAll("[data-judo-spin]");judoSpinElements.forEach(function(e){return judoSpin(e)});